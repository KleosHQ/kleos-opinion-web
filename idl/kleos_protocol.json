{
  "address": "kLeosk5KrdC8uXDRh66QhvwXqnjfkeadb7mU4ekGqcK",
  "metadata": {
    "name": "kleos_protocol",
    "version": "0.1.0",
    "spec": "0.1.0",
    "description": "Created with Anchor"
  },
  "instructions": [
    {
      "name": "claim_payout",
      "discriminator": [127, 240, 132, 62, 227, 198, 146, 133],
      "accounts": [
        {"name": "user", "writable": true, "signer": true, "relations": ["position"]},
        {"name": "market", "writable": true, "relations": ["position"]},
        {"name": "position", "writable": true, "pda": {"seeds": [{"kind": "const", "value": [112, 111, 115, 105, 116, 105, 111, 110]}, {"kind": "account", "path": "market"}, {"kind": "account", "path": "user"}]}},
        {"name": "vault_authority", "pda": {"seeds": [{"kind": "const", "value": [118, 97, 117, 108, 116]}, {"kind": "account", "path": "market"}]}},
        {"name": "vault", "writable": true},
        {"name": "user_token_account", "writable": true},
        {"name": "token_program", "address": "TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"}
      ],
      "args": []
    },
    {
      "name": "close_market",
      "discriminator": [88, 154, 248, 186, 48, 14, 123, 244],
      "accounts": [{"name": "market", "writable": true}],
      "args": []
    },
    {
      "name": "create_market",
      "discriminator": [103, 226, 97, 235, 200, 188, 251, 254],
      "accounts": [
        {"name": "admin_authority", "writable": true, "signer": true, "relations": ["protocol"]},
        {"name": "protocol", "writable": true, "pda": {"seeds": [{"kind": "const", "value": [112, 114, 111, 116, 111, 99, 111, 108]}]}},
        {"name": "market", "writable": true, "pda": {"seeds": [{"kind": "const", "value": [109, 97, 114, 107, 101, 116]}, {"kind": "account", "path": "protocol.market_count", "account": "Protocol"}]}},
        {"name": "vault_authority", "pda": {"seeds": [{"kind": "const", "value": [118, 97, 117, 108, 116]}, {"kind": "account", "path": "market"}]}},
        {"name": "vault", "writable": true, "pda": {"seeds": [{"kind": "account", "path": "vault_authority"}, {"kind": "const", "value": [6, 221, 246, 225, 215, 101, 161, 147, 217, 203, 225, 70, 206, 235, 121, 172, 28, 180, 133, 237, 95, 91, 55, 145, 58, 140, 245, 133, 126, 255, 0, 169]}, {"kind": "account", "path": "token_mint"}], "program": {"kind": "const", "value": [140, 151, 37, 143, 78, 36, 137, 241, 187, 61, 16, 41, 20, 142, 13, 131, 11, 90, 19, 153, 218, 255, 16, 132, 4, 142, 123, 216, 219, 233, 248, 89]}}},
        {"name": "token_mint"},
        {"name": "token_program", "address": "TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"},
        {"name": "associated_token_program", "address": "ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"},
        {"name": "system_program", "address": "11111111111111111111111111111111"}
      ],
      "args": [
        {"name": "start_ts", "type": "i64"},
        {"name": "end_ts", "type": "i64"},
        {"name": "items_hash", "type": {"array": ["u8", 32]}},
        {"name": "item_count", "type": "u8"}
      ]
    },
    {
      "name": "edit_market",
      "discriminator": [77, 92, 29, 5, 217, 159, 214, 32],
      "accounts": [
        {"name": "admin_authority", "writable": true, "signer": true, "relations": ["protocol"]},
        {"name": "protocol", "pda": {"seeds": [{"kind": "const", "value": [112, 114, 111, 116, 111, 99, 111, 108]}]}},
        {"name": "market", "writable": true}
      ],
      "args": [
        {"name": "start_ts", "type": "i64"},
        {"name": "end_ts", "type": "i64"},
        {"name": "items_hash", "type": {"array": ["u8", 32]}},
        {"name": "item_count", "type": "u8"}
      ]
    },
    {
      "name": "initialize_protocol",
      "discriminator": [188, 233, 252, 106, 134, 146, 202, 91],
      "accounts": [
        {"name": "admin", "writable": true, "signer": true},
        {"name": "protocol", "writable": true, "pda": {"seeds": [{"kind": "const", "value": [112, 114, 111, 116, 111, 99, 111, 108]}]}},
        {"name": "system_program", "address": "11111111111111111111111111111111"}
      ],
      "args": [{"name": "protocol_fee_bps", "type": "u16"}]
    },
    {
      "name": "open_market",
      "discriminator": [116, 19, 123, 75, 217, 244, 69, 44],
      "accounts": [
        {"name": "admin_authority", "writable": true, "signer": true, "relations": ["protocol"]},
        {"name": "protocol", "pda": {"seeds": [{"kind": "const", "value": [112, 114, 111, 116, 111, 99, 111, 108]}]}},
        {"name": "market", "writable": true}
      ],
      "args": []
    },
    {
      "name": "place_position",
      "discriminator": [218, 31, 90, 75, 101, 209, 5, 253],
      "accounts": [
        {"name": "user", "writable": true, "signer": true},
        {"name": "protocol", "pda": {"seeds": [{"kind": "const", "value": [112, 114, 111, 116, 111, 99, 111, 108]}]}},
        {"name": "market", "writable": true},
        {"name": "position", "writable": true, "pda": {"seeds": [{"kind": "const", "value": [112, 111, 115, 105, 116, 105, 111, 110]}, {"kind": "account", "path": "market"}, {"kind": "account", "path": "user"}]}},
        {"name": "user_token_account", "writable": true},
        {"name": "vault", "writable": true},
        {"name": "token_program", "address": "TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"},
        {"name": "system_program", "address": "11111111111111111111111111111111"}
      ],
      "args": [
        {"name": "selected_item_index", "type": "u8"},
        {"name": "raw_stake", "type": "u64"},
        {"name": "effective_stake", "type": "u128"}
      ]
    },
    {
      "name": "settle_market",
      "discriminator": [193, 153, 95, 216, 166, 6, 144, 217],
      "accounts": [
        {"name": "protocol", "pda": {"seeds": [{"kind": "const", "value": [112, 114, 111, 116, 111, 99, 111, 108]}]}},
        {"name": "market", "writable": true},
        {"name": "vault_authority", "pda": {"seeds": [{"kind": "const", "value": [118, 97, 117, 108, 116]}, {"kind": "account", "path": "market"}]}},
        {"name": "vault", "writable": true},
        {"name": "treasury_token_account", "writable": true},
        {"name": "token_program", "address": "TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"}
      ],
      "args": []
    },
    {
      "name": "update_protocol",
      "discriminator": [206, 25, 218, 114, 109, 41, 74, 173],
      "accounts": [
        {"name": "admin_authority", "writable": true, "signer": true, "relations": ["protocol"]},
        {"name": "protocol", "writable": true, "pda": {"seeds": [{"kind": "const", "value": [112, 114, 111, 116, 111, 99, 111, 108]}]}}
      ],
      "args": [
        {"name": "protocol_fee_bps", "type": "u16"},
        {"name": "treasury", "type": "pubkey"},
        {"name": "paused", "type": "bool"}
      ]
    }
  ],
  "accounts": [
    {"name": "Market", "discriminator": [219, 190, 213, 55, 0, 227, 198, 154]},
    {"name": "Position", "discriminator": [170, 188, 143, 228, 122, 64, 247, 208]},
    {"name": "Protocol", "discriminator": [45, 39, 101, 43, 115, 72, 131, 40]}
  ],
  "errors": [
    {"code": 6000, "name": "InvalidProtocolFeeBps", "msg": "Protocol fee bps must be between 0 and 10000."},
    {"code": 6001, "name": "Unauthorized", "msg": "Unauthorized access."},
    {"code": 6002, "name": "ProtocolPaused", "msg": "Protocol is paused."},
    {"code": 6003, "name": "InvalidMarketState", "msg": "Market is not in the required state."},
    {"code": 6004, "name": "InvalidTimestamp", "msg": "Invalid timestamp."},
    {"code": 6005, "name": "InvalidItemIndex", "msg": "Invalid item index."},
    {"code": 6006, "name": "InvalidStakeAmount", "msg": "Invalid stake amount."},
    {"code": 6007, "name": "EffectiveStakeTooLarge", "msg": "Effective stake exceeds allowed multiplier."},
    {"code": 6008, "name": "AlreadyClaimed", "msg": "Position already claimed."},
    {"code": 6009, "name": "MarketAlreadySettled", "msg": "Market already settled."},
    {"code": 6010, "name": "MathOverflow", "msg": "Math overflow occurred."}
  ],
  "types": [
    {
      "name": "Market",
      "type": {
        "kind": "struct",
        "fields": [
          {"name": "market_id", "type": "u64"},
          {"name": "items_hash", "type": {"array": ["u8", 32]}},
          {"name": "item_count", "type": "u8"},
          {"name": "start_ts", "type": "i64"},
          {"name": "end_ts", "type": "i64"},
          {"name": "status", "type": {"defined": {"name": "MarketStatus"}}},
          {"name": "total_raw_stake", "type": "u64"},
          {"name": "total_effective_stake", "type": "u128"},
          {"name": "winning_item_index", "type": "u8"},
          {"name": "effective_stake_per_item", "type": {"array": ["u128", 10]}},
          {"name": "protocol_fee_amount", "type": "u64"},
          {"name": "distributable_pool", "type": "u64"},
          {"name": "token_mint", "type": "pubkey"},
          {"name": "vault", "type": "pubkey"},
          {"name": "bump", "type": "u8"}
        ]
      }
    },
    {
      "name": "MarketStatus",
      "type": {
        "kind": "enum",
        "variants": [
          {"name": "Draft"},
          {"name": "Open"},
          {"name": "Closed"},
          {"name": "Settled"}
        ]
      }
    },
    {
      "name": "Position",
      "type": {
        "kind": "struct",
        "fields": [
          {"name": "market", "type": "pubkey"},
          {"name": "user", "type": "pubkey"},
          {"name": "selected_item_index", "type": "u8"},
          {"name": "raw_stake", "type": "u64"},
          {"name": "effective_stake", "type": "u128"},
          {"name": "claimed", "type": "bool"},
          {"name": "bump", "type": "u8"}
        ]
      }
    },
    {
      "name": "Protocol",
      "type": {
        "kind": "struct",
        "fields": [
          {"name": "admin_authority", "type": "pubkey"},
          {"name": "treasury", "type": "pubkey"},
          {"name": "protocol_fee_bps", "type": "u16"},
          {"name": "market_count", "type": "u64"},
          {"name": "paused", "type": "bool"},
          {"name": "bump", "type": "u8"}
        ]
      }
    }
  ]
}
